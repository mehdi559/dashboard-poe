name: Create Release

on:
  workflow_dispatch:
    inputs:
      version:
        description: 'Version to release (e.g., v0.1.0)'
        required: true
        default: 'v0.1.0'

jobs:
  create-release:
    runs-on: ubuntu-latest
    needs: build
    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Download all artifacts
      uses: actions/download-artifact@v4
      with:
        path: artifacts

    - name: Create Release
      uses: softprops/action-gh-release@v1
      with:
        tag_name: ${{ github.event.inputs.version }}
        name: Release ${{ github.event.inputs.version }}
        body: |
          ## My Wallet - Gestionnaire Financier ${{ github.event.inputs.version }}
          
          ### ðŸ“¦ Downloads
          - **Windows**: My-Wallet-Windows-v0.1.0.zip
          - **macOS**: My-Wallet-Mac-v0.1.0.zip  
          - **Linux**: My-Wallet-Linux-v0.1.0.zip
          
          ### ðŸš€ Features
          - Gestion des dÃ©penses et revenus
          - Budget intelligent
          - Ã‰pargne et objectifs
          - Rapports dÃ©taillÃ©s
          - Interface moderne et intuitive
          
          ### ðŸ“‹ Installation
          1. TÃ©lÃ©chargez la version pour votre systÃ¨me
          2. DÃ©compressez le fichier ZIP
          3. Lancez l'application
          
          ### ðŸ’¡ Support
          Pour toute question ou problÃ¨me, n'hÃ©sitez pas Ã  ouvrir une issue.
        files: |
          artifacts/My-Wallet-Windows-latest-ZIP/*.zip
          artifacts/My-Wallet-macos-latest-ZIP/*.zip
          artifacts/My-Wallet-ubuntu-latest-ZIP/*.zip
        draft: false
        prerelease: false
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} 